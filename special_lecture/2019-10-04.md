# 2019.10.04 특강

## 코드 리뷰는 협업이다. - 강대명님(Udemy)

### 코드 리뷰에서 기대하는 부분

- 내가 놓친 실수를 발견해 주기를 바람
- 지금보다 더 괜찮은 방식은 없을까?
  - 좀 더 파이썬/스칼라(~웨이)에서 추구하는 방식의 코드는?
  - 좀 더 성능을 올릴 수 있는 방식은?
- 코드 리뷰를 통해 부정적인 느낌을 받았다면?
- 코딩에 1시간 -> 코드 리뷰 1시간 정도는 필요하다.

### 효과적인 코드 리뷰의 방법

- 규칙이 있으면 좋다.
  - 최소 한 명 이상의 리뷰를 받지 않으면 Merge가 불가능
    - Github 등의 툴의 설정으로 가능하다.
  - 기본적인 lint, style 체크를 자동으로 진행한다.
    - 특정 사람의 스타일에 맞추는 것이 아닌 기계가 해주는 것이므로 기분이 덜 나쁨(설정된 rule에 따라)
  - 기본적인 기능 추가는 TestCase가 추가되어야만 한다.

### 언어의 특성을 고려한 코드 vs 가독성을 고려한 코드 -> 고려 대상

### 하나의 PR에 언제까지 코드 리뷰를 받아야 할까?

### 상대방의 리뷰가 내 생각과 다르다면?

### 리뷰어 vs 코드 작성자

- 코드 리뷰가 필요한 이유
  - 코드의 품질을 높이기 위해서
  - 동료의 작업을 이해하기 위해서
  - 필요한 배경 정보(추가적인 context)를 추가하는 것이 이해하기 좋다.
    - 코드 리뷰어가 그만큼 시간을 줄일 수 있다.
- 단순한 스타일 지적은 피하는 것이 좋다.
  - 미리 규칙을 정하고 툴을 통해 자동화하는 것이 좋다.
- 코드 작성자가 코드에 투자한 시간 만큼 리뷰어도 시간을 투자해야 한다.
- 코드를 PR하기 전에 가능한 코드 테스트를 해야 한다.
- 상대방의 코드 리뷰는 우리 코드의 품질을 높이기 위한 것이지 나를 공격하는 것이 아니라는 생각을 가져야 한다.

### do-something vs donot-something

- 보통은 donot-something를 정의하는 것이 좋다.

### 결론

- 코드 리뷰는 협업이기 때문에 항상 정답이 있지는 않다.
- 팀과 조직의 상황에 따라 다를 수밖에 없다.

## Code review cheat sheet - 정대선님(StudioXID)

### 모자 바꿔 쓰기

- 영어 표현으로 그 사람의 직무를 경험한다는 의미
- 그러한 태도로 코드 리뷰에 임하는 것이 좋다.

### 버그가 많은 부분(실수 가능성 높음)

**이러한 가능성에 대해 좀 더 넓은 시야를 갖고 주의해야 한다.**

#### 자료형

- 변수가 null일 가능성
- 배열/리스트의 인덱스가 다음 값일 상황이 있는지
  - -1, 0, 1, 2 : 이 경우에 안전하면 99%는 안전하다.

#### 조건문

- if / else if의 중첩
- 여러 개의 boolean 결합된 if 문
- boolean 값을 거꾸로 이해한 경우

#### 반복문

- 아예 진입x 가능성
- 이탈x 가능성
- 반복 대상 자료에 변경을 가하지는 않는지
- 인덱스 건너 뛰지 않는지

#### 함수

- 서로 다른 자료형의 값을 반환하지는 않는지
- 인자 개수가 다르지 않은지

#### 시작과 끝

- Transaction이 올바르게 수행되지 않을 가능성
  - 시작되기 직전 오류
  - 끝난 뒤에 발생한 문제
- drag start - drag end : 중도 이탈
  - ex) 드래그 중에 alt+tab

#### 재귀

- 탈출 조건이 온전한가

#### 계단 주의

- 한 코드 블럭 안에는 가급적 같은 깊이의 코드만 작성한다.
  - 추상화 수준이 비슷한 코드를 의미

#### CRUD

- 권한이 있는지
- GET으로 DELETE하지 않는지
  - 브라우저에 대한 공격 가능성 -> 여러 보안 방법에 대해 고민해볼 필요가 있다.

#### Dangling evnet handler

- 등록된 이벤트가 해제되지 않는 경우
- 핸들러가 중복으로 등록되지 않는지
- 객체가 폐기될 때 등록한 이벤트 핸들러가 모두 해제되도록 하는 방법이 있다.

#### Inverted Dependency

- 상위 레이어의 객체의 참조를 갖지는 않는지

#### Model, Controller의 역할이 제대로 분리되었는지

#### 변경된 부분만 보지 말고 전체를 살펴보기

#### 이중 요청은 거의 항상 발생한다.

- 저장 -> 종료 요청
- 방어 장치가 필요

#### 최적화

- 실제로 측정해보고 고치는 것이 좋다.
  - 이렇게 하면 좋을 것 같아서(머릿속으로 측정) 최적화하는 것은 좋지 않다.
- 최적화를 위한 캐싱 등은 상태 변화를 가져가고 사이드 이펙트를 초래할 가능성이 있다.

#### 요구사항

- 요구사항을 제대로 구현했는지
- 구현을 깨뜨려 보기
  - 같은 동작 반복해보기
  - 음수, 특수문자, 너무 긴 문자열 넣어보기
- 끊임 없이 의심하기(수사관 마인드)
